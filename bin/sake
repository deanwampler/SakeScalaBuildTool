#!/bin/sh -- 

CLASSPATH=lib/specs-1.4.1.jar:lib/junit-4.4.jar:lib/sake.jar
set +x
file=sake.scala
args[0]=-cp
args[1]=$CLASSPATH

while [ $# -gt 0 ]
do
	case $1 in
		-f)
			shift
			file=$1
			;;
		-*)
			args[${#args[@]}]=$1
			shift
			args[${#args[@]}]=$1
			;;
		*)
			targets[${#targets[@]}]=$1
			;;
	esac
	shift
done

if [ "${#targets[@]}" == 0 ]; then
    targets[0]="all"
fi

scala ${args[@]} <<-EOF
:load $file
build("${targets[@]}")
EOF
